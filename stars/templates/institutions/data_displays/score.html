{% extends 'institutions/data_displays/base.html' %}

{% block crumbs %}
	{{ block.super }} &gt;
	<a href='/institutions/data-displays/scores/'>Scores</a>
{% endblock %}

{% block title %}Scores | {{ block.super }}{% endblock %}

{% block body_onload %}{{ block.super }}initLookup();{% endblock %}

{% block content %}
	<div class='inner20'>
	<h1>STARS Report Scores</h1>
	{% load content %}
    {% display_block_content 'data_display_scores' user %}
	<form method='POST' action='.' id='filterForm'>
		<div class='greyBox'>
			Display results for institutions with the following characteristics:<br/><br/>
			<table class='filterList'>
				<tr>
					<th></th>
					<th>Type of Characteristic</th>
					<th>Specific Characteristic</th>
					<th></th>
				</tr>
				{% for k, f in form.forms.filters.forms.delete_forms.forms.items %}
					<tr>
						<td style="text-align: center;">
							<img src='/media/static/images/delete_grey_x.png' alt='[x]' onclick="deleteFilter('{{ k }}');" style='cursor: pointer;' />
							{{ f.delete }}
							{{ f.errors }}
						</td>
						<td>{{ f.instance.type }}</td>
						<td>{{ f.instance.item }}</td>
						<td></td>
					</tr>
				{% endfor %}
				<tr>
					<td></td>
					<td>
						{{ form.forms.filters.forms.new_filter_form.type }}
						{{ form.forms.filters.forms.new_filter_form.errors.type }}
					</td>
					<td>
						{{ form.forms.filters.forms.new_filter_form.errors.item }}
						{{ form.forms.filters.forms.new_filter_form.item }}
					</td>
					<td><button type='submit'>Add Filter</button></td>
				</tr>
			</table>
		</div>
		<div style='text-align: center'>
			<img src='/media/static/images/arrow_down.png' />
		</div>
		<div class='greyBox'>
			<p>Select up to four categories, subcategories, and/or credits of interest:</p>
			<table style='margin: 0px auto;'>
				{{ form.forms.columns }}
			</table>
			<div style='text-align: center'>
				<button type='submit'>Apply</button>
			</div>
		</div>
	</form>
	<div style='text-align: center'>
		<img src='/media/static/images/arrow_down.png' />
	</div>
	<table id='institution_list' class='greyTable'>
		
       	{% if object_list %}
       		<tr>
	       		<th style='text-align: left'>
	       			Matching Institutions
	       		</th>
	   			{% for k, col in columns %}
	   				{% if col %}
	   					<th>{{ col }}</th>
	   				{% endif %}
	   			{% endfor %}
	       	</tr>
	       	{% for o in object_list %}
	       		<tr class="{% cycle 'even' 'odd' %}">
	       			<td style='text-align: left;white-space: nowrap;'>
	       				<a href='{{ o.ss.get_scorecard_url }}'>{{ o.ss }}</a>
	       			</td>
	       			{% for col in o.cols %}
	       				<td>{{ col.score|floatformat:2 }}{{ col.units }}</td>
	       			{% endfor %}
	       		</tr>
	       	{% endfor %}
	    {% else %}
       		<tr><td colspan="6">
       			<p style='padding: 30px;'>
       				No results yet. Please filter on a characteristic above.
       			</p>
       		</td></tr>
       	{% endif %}
	</table>
	</div>
{% endblock %}