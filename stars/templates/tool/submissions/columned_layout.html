{% extends 'tool/base.html' %}

{% load cache %}

{% block tool_menu %}
  {% with active_menu="submission"%}{{ block.super }}{% endwith %}
{% endblock %}

{% block body_onload %}{{ block.super }}{% endblock %}

{% block left_nav %}
  <div class="well" style="width:220px; padding: 8px 0;">
    {% load collapsing_menu %}
    {% show_collapsing_menu outline %}
  </div>
{% endblock %}

{% block submission_outline %}
  <style type='text/css'>
   a.credit_menu_{{ credit.id }} {
       background-color: #aaaaaa;
       color: white;
   }
  </style>
  <ul class="listexpander" id='credit_menu_{{ credit.id }}'>
    {% cache 86400 submission_credit_listexpander submissionset.creditset.id %}
      {% for cat in submissionset.categorysubmission_set.all %}
	<li>
	  <a href='{{ cat.get_submit_url }}'</a>
          <ul>
            {% for sub in cat.subcategory_set.all %}
              <li>
                <a href='{{ sub.get_submit_url }}'
                   {% if summary %}
                   onclick='jumpToSubcat("{{ cat.id }}",
                            "{{ sub.id }}");'
                   {% endif %}
                >
                  {{ sub }}
                </a>
                <ul>
                  {% for c in sub.get_tier1_credits %}
                    <li>
                      <a class='credit_menu_{{ c.id }}'
                    	 href='{{ c.get_submit_url }}'>{{ c }}</a>
                    </li>
                  {% endfor %}
                  {% if sub.get_tier2_credits %}
                    <li>
                      Tier 2 Credits
                      <ul>
                    	{% for c in sub.get_tier2_credits %}
                    	  <li><a {% ifequal c credit %}id='currentSelection'{% endifequal %}
                    				       href='{{ c.get_submit_url }}'>{{ c }}</a></li>
                    	{% endfor %}
                      </ul>
                    </li>
                  {% endif %}
                </ul>
              </li>
            {% endfor %}
          </ul>
        </li>
      {% endfor %}
    {% endcache %}
  </ul>
{% endblock %}
